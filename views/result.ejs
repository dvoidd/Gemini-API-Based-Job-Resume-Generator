<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hasil Surat Lamaran | Gemini API-Based Job Resume Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- âœ… SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gradient-to-b from-blue-100 to-white min-h-screen">
    <div class="container mx-auto px-4 py-10 max-w-4xl">
      <!-- Header -->
      <div class="mb-8 flex items-center">
        <a
          href="/"
          class="inline-flex items-center text-blue-600 hover:text-blue-800 transition"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 mr-2"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"
            />
          </svg>
          Kembali
        </a>
      </div>

      <!-- Title -->
      <div class="mb-8 text-center">
        <h1 class="text-3xl font-bold text-blue-800 mb-2">
          Surat Lamaran untuk <%= name %>
        </h1>
        <p class="text-blue-600 text-sm">
          Berikut adalah surat lamaran kerja yang telah dibuat berdasarkan
          informasi Anda.
        </p>
      </div>

      <!-- Letter Card -->
      <div
        class="bg-white border border-blue-200 rounded-xl shadow-md p-6 md:p-8 mb-8"
      >
        <pre
          id="letterContent"
          class="whitespace-pre-wrap font-sans text-slate-800 leading-relaxed text-sm md:text-base"
        >
<%= result %>
        </pre>
      </div>

      <!-- Copy Button -->
      <div class="flex justify-center">
        <button
          id="copyBtn"
          class="inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 mr-2"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
            />
          </svg>
          Salin ke Clipboard
        </button>
      </div>
    </div>

    <script>
      const copyBtn = document.getElementById("copyBtn");

      copyBtn.addEventListener("click", () => {
        const text = document.getElementById("letterContent").innerText;
        navigator.clipboard
          .writeText(text)
          .then(() => {
            Swal.fire({
              toast: true,
              position: "top-end",
              icon: "success",
              title: "ðŸŽ‰ Teks berhasil disalin!",
              showConfirmButton: false,
              timer: 3000,
              timerProgressBar: true,
              background: "#fff",
              color: "#1e3a8a",
              iconColor: "#10b981",
              didOpen: (toast) => {
                toast.addEventListener("mouseenter", Swal.stopTimer);
                toast.addEventListener("mouseleave", Swal.resumeTimer);
              },
            });
          })
          .catch((err) => {
            Swal.fire({
              icon: "error",
              title: "Oops...",
              text: "Gagal menyalin teks: " + err,
              confirmButtonColor: "#e11d48",
            });
          });
      });
    </script>
  </body>
</html>
